% Linux Kniha kouzel, šablona formátu LaTeX A5
% Copyright (c) 2019 Singularis <singularis@volny.cz>
%
% Toto dílo je dílem svobodné kultury; můžete ho šířit a modifikovat pod
% podmínkami licence Creative Commons Attribution-ShareAlike 4.0 International
% vydané neziskovou organizací Creative Commons. Text licence je přiložený
% k tomuto projektu nebo ho můžete najít na webové adrese:
%
% https://creativecommons.org/licenses/by-sa/4.0/
%
% This program is free software; you can redistribute it and/or modify
% it under the terms of the GNU General Public License as published by
% the Free Software Foundation; either version 2 of the License, or
% (at your option) any later version.
%
% This program is distributed in the hope that it will be useful,
% but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
% GNU General Public License for more details.
%
% You should have received a copy of the GNU General Public License
% along with this program; if not, write to the Free Software
% Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
%
{{ZAČÁTEK KNIHY}}
\documentclass[10pt,final]{book}
% 1. skupina balíčků:
\usepackage[utf8]{inputenc}
\usepackage[czech]{babel}
%
{{POKUD JE FORMÁT pdf-a4}}
\usepackage[pdftex,a4paper,inner=1.5cm,outer=1cm,top=1.5cm,bottom=1.5cm]{geometry} % + showframe pro ladění
{{KONEC POKUD}}
{{POKUD JE FORMÁT pdf-a5}}
\usepackage[pdftex,a5paper,inner=1.5cm,outer=1cm,top=1.5cm,bottom=1.5cm]{geometry} % + showframe pro ladění
{{KONEC POKUD}}

%\usepackage[B1,LY1,T1]{fontenc}
\usepackage[T1]{fontenc}

% 2. skupina balíčků:
\usepackage{textcomp}       % musí být načtený přednostně; vyžadovaný balíčkem {gensymb}
\usepackage[pdftex]{xcolor} % barevné písmo

% 3. skupina balíčků:
\usepackage[arrows]{boisik} % jen kvůli znaku $\carriagereturn$ (pokud existuje stabilní náhrada, bylo by lepší ji použít)
\usepackage{fancyhdr}       % formátování záhlaví a zápatí
\usepackage[bottom]{footmisc}% aby se poznámky pod čarou správně umístily
\usepackage{gensymb}        % symboly jako např. \degree
\usepackage[pdftex]{graphicx}% vkládání obrázků
\usepackage{ifthen}         % příkaz \ifthenelse a související konstrukce
\usepackage{titlesec}       % formátování nadpisů kapitol
\usepackage{verbatim}       % zejm. prostředí {comment}, ale také {verbatim}

% {fancyhdr}:
\fancypagestyle{normalni}{%
    \fancyhead{}\fancyfoot{}%
    \fancyfoot[LE,RO]{\thepage}%
    \renewcommand*{\headrulewidth}{0pt}%
    \renewcommand*{\footrulewidth}{0pt}%
}

% {titlesec}:
\titleformat{\chapter}[hang]{\normalfont\LARGE\bfseries}{\makebox[35pt][l]{\thechapter}}{5pt}{}\relax
\titlespacing*{\chapter}{0pt}{-1ex}{1ex plus1ex minus0.5ex}\relax

\titleformat{\section}[hang]{\normalfont\Large\bfseries}{\makebox[35pt][l]{\thesection}}{5pt}{}\relax
\titlespacing*{\section}{0pt}{1ex plus2ex minus0.5ex}{0.5ex plus0.25ex minus0.5ex}\relax

\titleformat{\subsection}[hang]{\normalfont\large}{}{0pt}{\filcenter\arabic{subsection}~}\relax
\titlespacing*{\subsection}{0pt}{1ex plus4ex minus0pt}{4pt}\relax

\assignpagestyle{\chapter}{normalni}

% {xcolor}:
\definecolor{seda}{gray}{0.5}

% \begin{priklad}{#2 = Záhlaví příkladu}{#3 = \footnote{}\footnote{}...}
%   \radekprikladu{text-řádku}
%   \radekprikladu{text-řádku}
% \end{priklad}
\newenvironment*{priklad}[3][]{%
    \newcommand*{\radekprikladu}[1]{\nepoprve{{%
            \fontfamily{bsk}\fontseries{m}\fontshape{n}\selectfont%
            \textcolor{seda}{\ensuremath{\carriagereturn}%
        }}}\item{##1}}%
    \begin{samepage}
    \fontfamily{qcr}\fontseries{m}\fontshape{n}\selectfont\raggedright%
    \ifthenelse{\equal{#2}{}}{}{\begin{list}{\makebox[0pt][l]{\#}\makebox[0pt][l]{\rule[2ex]{5cm}{0.5pt}}}{%
            \setlength{\leftmargin}{0.75em}%
            \setlength{\labelwidth}{0pt}%
            \setlength{\labelsep}{\leftmargin}%
        }\raggedright\item\relax%
        %%\makebox[0pt][l]{\rule[2ex]{5cm}{0.5pt}}%
        %\vspace*{-1.5ex}\rule[-3pt]{5cm}{0.5pt}\\[0pt]%
        %
        %\setlength{\unitlength}{1ex}%
        %\begin{picture}(0,0)\put(0,2){\line(1,0){20}}\end{picture}%
        {#2}#3%
    \end{list}\vspace{-3ex}}%
    \budepoprve%
    \begin{list}{}{%
        \setlength{\itemsep}{0pt}%
        \setlength{\parsep}{0pt}%
        \setlength{\topsep}{1ex plus0.5ex minus0.5ex}%
}}{%
    \end{list}%
    \end{samepage}%
    \vspace{2mm plus2mm minus2mm}%
}

% qcr = TeX Gyre Cursor

\newcommand*{\kapitola}[2][]{\chapter{#2}}
\newcommand*{\sekce}[2][]{\section{#2}}
\newcommand*{\podsekce}[2][]{\subsection{#2}}

\newcommand*{\budepoprve}{%
    \renewcommand{\nepoprve}[1]{%
        \renewcommand{\nepoprve}[1]{####1}%
    }%
}
\newcommand*{\dopln}[1]{{\fontfamily{qcr}\fontseries{m}\fontshape{it}\selectfont\underline{{#1}}}}%
\newcommand*{\moznyzlom}{{\fontseries{m}\fontshape{n}\selectfont\textcolor{seda}{\-}}}%
\newcommand{\nepoprve}[1]{#1}
\newcommand*{\tritecky}{{\fontfamily{cmss}\fontseries{m}\fontshape{n}\selectfont\normalsize\mbox{...}}}%
% {} \big \Big \bigg \Bigg
\newcommand*{\volitelnyzacatek}{\textcolor{seda}{\ensuremath{\big[}}}%
\newcommand*{\volitelnykonec}{\textcolor{seda}{\ensuremath{\big]}}}%

\renewcommand*{\rmdefault}{cmr}

\begin{document}%
%
% Nastavit styl záhlaví a zápatí
\pagestyle{normalni}%
%
% Nastavit znak pro „dělení slov“ v kódu na zpětné lomítko
{%
    \fontfamily{qcr}%
    \fontseries{m}\selectfont\hyphenchar\font=`\\%
    \fontseries{b}\selectfont\hyphenchar\font=`\\%
    \fontseries{bx}\selectfont\hyphenchar\font=`\\%
    \fontshape{it}\fontseries{m}\selectfont\hyphenchar\font=`\\%
    \fontseries{b}\selectfont\hyphenchar\font=`\\%
    \fontseries{bx}\selectfont\hyphenchar\font=`\\%
}%
%
\raggedbottom%
{{ZAČÁTEK KAPITOLY}}
{{TĚLO KAPITOLY}}
{{KONEC KAPITOLY}}
\end{document}
{{KONEC KNIHY}}
